#:kivy 2.1.0

<ScreenMachineSetting>:
    MDBoxLayout:
        orientation: "vertical"

		# header layout
        MDBoxLayout:
            id: header_layout
            orientation: "horizontal"
            padding: 20
			size_hint_y: 0.1
                    
            Image:
                id: logo
                source:'asset/logo_rafindo.png'
                size_hint_x: 0.25
                allow_stretch: True 

			MDBoxLayout:
				orientation: "vertical"

				MDLabel:
					id: subtitle            
					text: "PIPE BENDING CNC MACHINE"
					halign: "center"
					valign: "middle"
					font_style: 'H5'

				MDLabel:
					id: comm_status
					text: "Status:"
					halign: "center"
					valign: "middle"

                  
            Image:
                id: logo
                source:'asset/logo_polman.png'
                size_hint_x: 0.25
                allow_stretch: True  

		# title layout
		MDBoxLayout:
			id: layout_title
			orientation: "horizontal"
			size_hint_y: 0.05

			MDIconButton:
				id: bt_menu
				icon: "menu"
				size_hint_x: 0.2
				on_press: root.screen_main_menu()

			MDLabel:
				text: "MACHINE SETTING"
				halign: "center"
				valign: "middle"
				font_style: 'H6'

			MDIconButton:
				id: bt_shutdown
				icon: "power"
				size_hint_x: 0.2
				on_press: root.exec_shutdown()          
		
		# setting layout
		MDBoxLayout:
			id: layout_machine_setting
			orientation: "vertical"
			size_hint_y: 0.80
			padding:20
			spacing:20

			# machine illustration
			Image:
				id: machine_image
				source:'asset/machine_setting_eff_length.png'
				allow_stretch: True  
				size_hint_y: 0.5


			MDScrollView:
				id: layout_machine_setting
				size_hint_y: 0.5
				
				MDGridLayout:
					cols:2
					padding:20
					size_hint_y: None
					height: self.minimum_height
					width: self.minimum_width

					MDLabel:
						text: "Effective Length"
						font_style: 'Body1'

					MDTextField:
						id: input_machine_eff_length
						hint_text: "Input Effective Length (mm)"
						font_style: 'Body1'
						input_filter: 'float'
						on_text_validate: root.update()
						on_focus: root.update_image(0)

					MDLabel:
						text: "Pipe Support Interference Pos"
						font_style: 'Body1'

					MDTextField:
						id: input_machine_supp_pos
						hint_text: "Input Pipe Support Interference Pos (mm)"
						font_style: 'Body1'
						input_filter: 'float'
						on_text_validate: root.update()
						on_focus: root.update_image(1)

					MDLabel:
						text: "Clamping Die Front Limit Delay Time"
						font_style: 'Body1'

					MDTextField:
						id: input_machine_clamp_front_delay
						hint_text: "Input Clamping Die Front Limit Delay Time (sec)"
						font_style: 'Body1'
						input_filter: 'float'
						on_text_validate: root.update()
						on_focus: root.update_image(2)

					MDLabel:
						text: "Clamping Die Rear Limit Delay Time"
						font_style: 'Body1'

					MDTextField:
						id: input_machine_clamp_rear_delay
						hint_text: "Input Clamping Die Rear Limit Delay Time (sec)"
						font_style: 'Body1'
						input_filter: 'float'
						on_text_validate: root.update()	
						on_focus: root.update_image(3)				

					MDLabel:
						text: "Pressure Die Front Limit Delay Time"
						font_style: 'Body1'

					MDTextField:
						id: input_machine_press_front_delay
						hint_text: "Input Pressure Die Front Limit Delay Time (sec)"
						font_style: 'Body1'
						input_filter: 'float'
						on_text_validate: root.update()
						on_focus: root.update_image(4)

					MDLabel:
						text: "Pressure Die Rear Limit Delay Time"
						font_style: 'Body1'

					MDTextField:
						id: input_machine_press_rear_delay
						hint_text: "Input Pressure Die Rear Limit Delay Time (sec)"
						font_style: 'Body1'
						input_filter: 'float'
						on_text_validate: root.update()
						on_focus: root.update_image(5)		

					MDLabel:
						text: "Collet Clamping Delay Time"
						font_style: 'Body1'

					MDTextField:
						id: input_machine_collet_clamp_delay
						hint_text: "Input Collet Clamping Delay Time (sec)"
						font_style: 'Body1'
						input_filter: 'float'
						on_text_validate: root.update()
						on_focus: root.update_image(6)

					MDLabel:
						text: "Collet Opening Delay Time"
						font_style: 'Body1'

					MDTextField:
						id: input_machine_collet_open_delay
						hint_text: "Input Collet Opening Delay Time (sec)"
						font_style: 'Body1'
						input_filter: 'float'
						on_text_validate: root.update()
						on_focus: root.update_image(7)

					MDLabel:
						text: "Die Radius"
						font_style: 'Body1'

					MDTextField:
						id: input_machine_die_radius
						hint_text: "Input Die Radius (mm)"
						font_style: 'Body1'
						input_filter: 'float'
						on_text_validate: root.update()
						on_focus: root.update_image(7)

		# MDRectangleFlatIconButton: navigation operation
		MDBoxLayout:
			orientation: "horizontal"
			size_hint_y: 0.05
			padding:20
			spacing:20

			MDFillRoundFlatIconButton:
				id: bt_save
				icon: "floppy"
				text: "SAVE"
				font_style: 'H6'
				size_hint_x: 0.5
				on_press: root.save()

			MDFillRoundFlatIconButton:
				id: bt_reset
				icon: "folder"
				text: "LOAD"
				font_style: 'H6'
				size_hint_x: 0.5
				on_press: root.load()